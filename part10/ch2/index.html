<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Example</title>
</head>
<body>
    <div id="root">
    </div>

    <script crossorigin src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script type="text/babel">

        // console.log(React);
        // console.log(ReactDOM);


        /* //클래스 컴포넌트
        //정의
        class ClassComponent extends React.Component {
            render(){
                return <div>Hello</div>;
            }
        }

        //사용
        ReactDOM.render(
            <ClassComponent />,
            document.querySelector('#root')
        );
        */

    

        /*  // Function 컴포넌트
        //정의 1
        // function FunctionComponent() {
        //     return <div>Hello</div>;
        // }

        //정의 2
        const FunctionComponent = () => {
            return <div>Hello</div>;
        }

        //사용
        ReactDOM.render(
            <FunctionComponent />,
            document.querySelector('#root')
        )
        */

    </script>
    <script type="text/javascript">
        console.log(React);
        console.log(ReactDOM);

        // React.createElement(
        //     type,           // 태그 이름 문자열 | 리액트 컴포넌트 | React.Fragment
        //     [props],        // 리액트 컴포넌트에 넣어주는 데이터 객체
        //     [...children]   // 자식으로 넣어주는 요소들
        // )

        /* //1. 태그 이름 문자열 type
        //  <h1> type 이 "태그 이름 문자열" 입니다. </h1>
        ReactDOM.render(
            React.createElement('h1', null, 'type 이 "태그 이름 문자열" 입니다'),
            document.querySelector('#root')
        )
        */

        /*  //2. 리액트 컴포넌트 type
        const Component = () => {
            return React.createElement(
                'p',
                null,
                'type이 "React 컴포넌트" 입니다'
            );
        };

        // <Component></Component> => <Component /> => <p>type이 "React 컴포넌트" 입니다</p>
        ReactDOM.render(
            React.createElement(Component, null, null),
            document.querySelector('#root')
        );
        */

        /* //3. React.Fragment
        ReactDOM.render(
            React.createElement(
                React.Fragment,
                null,
                'type 이 "React Fragment" 입니다.',
                'type 이 "React Fragment" 입니다.',
                'type 이 "React Fragment" 입니다.'
            ),
            document.querySelector('#root')
        );
        */


        /* //4. 복잡한 리액트 엘리먼트 모임
        // <div>
        //     <div>
        //         <h1>주제</h1>
        //         <ul>
        //             <li>React</li>
        //             <li>Vue</li>
        //         </ul>
        //     </div>
        // </div>

        ReactDOM.render(
            React.createElement(
                'div', 
                null, 
                React.createElement(
                    'div',
                    null, 
                    React.createElement(
                        "h1", 
                        null, 
                        "주제"
                    ),
                    React.createElement(
                        "ul", 
                        null, 
                        React.createElement("li",null,"React"),
                        React.createElement("li",null,"Vue")
                    )
                )
            ),
            document.querySelector('#root')
        )
        */

        // babel
        // 작성한 코드 => 순수하게 실행할 수 있는 자바스크립트
    </script>

    <script type="text/babel">

        /* //JSX
        ReactDOM.render(
            // div 태그, {a:"a"} props, div children
            <div a="a">
                <div>
                    <h1>주제</h1>
                    <ul>
                        <li>React</li>
                        <li>Vue</li>
                    </ul>
                </div>
            </div>,
            document.querySelector('#root')
        )
        */


        /* //함수로 만든 컴포넌트 -> props
        function Component(props) {
            return (
                <div>
                    <h1>
                        {props.message} 이것은 함수로 만든 컴포넌트 입니다.
                    </h1>
                </div>
            );
        }

        //함수, 클래스에서 default 값 설정 방법
        Component.defaultProps = {
            message: "기본값",
        };

        ReactDOM.render(
            <Component message="안녕하세요!!!!" />,
            document.querySelector('#root')
        )
        */



        /*//클래스로 만든 컴포넌트 -> props
        class Component extends React.Component {
            render() {
                return (
                    <div>
                        <h1>
                            {this.props.message} 이것은 클래스로 만든 컴포넌트 입니다.
                        </h1>
                    </div>
                );
            }

            //클래스에서 default 값 설정 방법
            static defaultProps = {
                message: "기본값2",
            };
        }

        //함수, 클래스에서 default 값 설정 방법
        Component.defaultProps = {
            message: "기본값",
        };

        ReactDOM.render(
            // <Component message="안녕하세요!!!!" />,
            <Component />,
            document.querySelector('#root')
        )
        */
        

        /* // 클래스 -> state
        class Component extends React.Component {
            // state 정의 1
            // state = {
            //     count: 0,
            // };

            //state 정의 2
            constructor(props){
                super(props);
                
                this.state = {
                    count : 0
                }
            }

            render() {
                return (
                    <div>
                        <h1>
                            {this.props.message} 이것은 클래스로 만든 컴포넌트 입니다.
                        </h1>
                        <p>
                            {this.state.count}
                        </p>
                    </div>
                );
            }

            componentDidMount() {
                setTimeout(()=>{
                    // this.state.count = this.state.count + 1
                    // => render가 자동으로 되지 않음! 

                    // state 변경 1 ()
                    // this.setState({
                    //     count: this.state.count + 1,
                    // });

                    // state 변경 2
                    this.setState((previousState) => {
                        const newState =  { count : previousState.count + 1 }
                        return newState;
                    })
                }, 1000);
            }

        }

        //함수, 클래스에서 default 값 설정 방법
        Component.defaultProps = {
            message: "기본값",
        };

        ReactDOM.render(
            <Component message="기본값 아님" />,
            document.querySelector('#root')
        )
        */

        /*//Event Handler - function
        function Component() {
            return (
                <div>
                    <button 
                        onClick={() => {
                            console.log("clicked!!");
                        }}
                    >
                        클릭
                    </button>
                </div>
            );

        }

        ReactDOM.render(
            <Component />,
            document.querySelector('#root')
        )
        */


        /*//Event Handler - class
        class Component extends React.Component {
            state = {
                count : 0
            };
            render(){
                return (
                    <div>
                        <p> {this.state.count} </p>
                        <button 
                            onClick={() => {
                                console.log("clicked!!");
                                this.setState((state)=>{
                                    return {
                                        ...state,
                                        count: state.count + 1
                                    };
                                })
                            }}
                        >
                            클릭
                        </button>
                    </div>
                );
            }
        }

        ReactDOM.render(
            <Component />,
            document.querySelector('#root')
        )
        */


        /*// 클래스에서 이벤트 콜백 함수 호출
        class Component extends React.Component {
            state = {
                count : 0
            };
            render(){
                return (
                    <div>
                        <p> {this.state.count} </p>
                        <button 
                            onClick={this.click}
                        >
                            클릭
                        </button>
                    </div>
                );
            }

            // // 방법 1
            // constructor(props){
            //     super(props);

            //     this.click = this.click.bind(this);
            // }
            // click() { 
            //     console.log("clicked!!");
            //     this.setState((state)=>{
            //         return {
            //             ...state,
            //             count: state.count + 1
            //         };
            //     })
            // }

            //방법 2
            click = () => { 
                console.log("clicked!!");
                this.setState((state)=>{
                    return {
                        ...state,
                        count: state.count + 1
                    };
                })
            }
        }

        ReactDOM.render(
            <Component />,
            document.querySelector('#root')
        )
        */

        /*// Lifecycle hook, component 생성 및 마운트
        class App extends React.Component {
            state = {
                age: 26,
            };
            constructor(props){
                super(props);
                console.log("constructor",props)
            }
            render() {
                console.log('render');
                return (
                    <div>
                        <h2>
                            Hello {this.props.name} - {this.state.age}
                        </h2>
                    </div>
                );
            }

            componentWillMount() {
                console.log('componentWillMount');
            }
            componentDidMount() {
                console.log('componentDidMount');

                setInterval(()=>{
                    console.log("setInterval");
                    
                    // 생략 X
                    this.setState((state)=>{
                        return {
                            ...state,
                            age:state.age+1
                        }
                    })
                    
                    // 생략 O
                    // this.setState(state => ({
                    //     ...state, 
                    //     age:state.age+1
                    // }))

                },1000)
            }
        }

        ReactDOM.render(
            <App name="Dyonyon" />,
            document.querySelector('#root')
        )*/





        /*// Lifecycle hook, props, state 변경
        class App extends React.Component {
            state = {
                age: 26,
            };
            constructor(props){
                super(props);
                console.log("constructor",props)
            }
            render() {
                console.log('render');
                return (
                    <div>
                        <h2>
                            Hello {this.props.name} - {this.state.age}
                        </h2>
                    </div>
                );
            }

            componentWillMount() {
                console.log('componentWillMount');
            }
            componentDidMount() {
                console.log('componentDidMount');

                setInterval(()=>{
                    // console.log("setInterval");
                    
                    // 생략 X
                    this.setState((state)=>{
                        return {
                            ...state,
                            age:state.age+1
                        }
                    })
                    
                    // 생략 O
                    // this.setState(state => ({
                    //     ...state, 
                    //     age:state.age+1
                    // }))

                },1000)
            }

            componentWillReceiveProps(nextProps) {
                console.log('componentWillReceiveProps',nextProps);
            }

            shouldComponentUpdate(nextProps, nextState){
                console.log('shouldComponentUpdate',nextProps, nextState);

                // return 값에 따라 render 발생 여부 결정됨
                // return false;
                return true;
            }

            componentWillUpdate(nextProps, nextState){
                console.log('componentWillUpdate',nextProps, nextState);
            }

            componentDidUpdate(prevProps, prevState){
                console.log('componentDidUpdate',prevProps, prevState);
            }

            
        }

        ReactDOM.render(
            <App name="Dyonyon" />,
            document.querySelector('#root')
        )
        */



        /*// Lifecycle hook, unmount 변경
        class App extends React.Component {
            state = {
                age: 26,
            };
            interval=null;

            constructor(props){
                super(props);
                console.log("constructor",props)
            }
            render() {
                console.log('render');
                return (
                    <div>
                        <h2>
                            Hello {this.props.name} - {this.state.age}
                        </h2>
                    </div>
                );
            }

            componentWillMount() {
                console.log('componentWillMount');
            }
            componentDidMount() {
                console.log('componentDidMount');

                this.interval = setInterval(()=>{
                    // console.log("setInterval");
                    
                    // 생략 X
                    this.setState((state)=>{
                        return {
                            ...state,
                            age:state.age+1
                        }
                    })
                    
                    // 생략 O
                    // this.setState(state => ({
                    //     ...state, 
                    //     age:state.age+1
                    // }))

                },1000)
            }

            componentWillReceiveProps(nextProps) {
                console.log('componentWillReceiveProps',nextProps);
            }

            shouldComponentUpdate(nextProps, nextState){
                console.log('shouldComponentUpdate',nextProps, nextState);

                // return 값에 따라 render 발생 여부 결정됨
                // return false;
                return true;
            }

            componentWillUpdate(nextProps, nextState){
                console.log('componentWillUpdate',nextProps, nextState);
            }

            componentDidUpdate(prevProps, prevState){
                console.log('componentDidUpdate',prevProps, prevState);
            }

            componentWillUnmount() {
                clearInterval(this.interval);
            }

            
        }

        ReactDOM.render(
            <App name="Dyonyon" />,
            document.querySelector('#root')
        )
        */




        /*// Lifecycle (v 16.3 이상) - getDerivedStateFromProps
        class App extends React.Component {
            state = {
                age: 26,
            };
            interval=null;

            constructor(props){
                super(props);
                console.log("constructor",props)
            }
            render() {
                console.log('render');
                return (
                    <div>
                        <h2>
                            Hello {this.props.name} - {this.state.age}
                        </h2>
                    </div>
                );
            }


            static getDerivedStateFromProps(nextProps, prevState){
                console.log('getDerivedStateFromProps',nextProps, prevState);

                // return null;
                return {
                    age: 260,
                };
            }

            componentDidMount() {
                console.log('componentDidMount');

                this.interval = setInterval(()=>{
                    // console.log("setInterval");
                    
                    // 생략 X
                    this.setState((state)=>{
                        return {
                            ...state,
                            age:state.age+1
                        }
                    })
                    
                    // 생략 O
                    // this.setState(state => ({
                    //     ...state, 
                    //     age:state.age+1
                    // }))

                },1000)
            }

            // componentWillReceiveProps(nextProps) {
            //     console.log('componentWillReceiveProps',nextProps);
            // }

            shouldComponentUpdate(nextProps, nextState){
                console.log('shouldComponentUpdate',nextProps, nextState);

                // return 값에 따라 render 발생 여부 결정됨
                // return false;
                return true;
            }

            // componentWillUpdate(nextProps, nextState){
            //     console.log('componentWillUpdate',nextProps, nextState);
            // }

            componentDidUpdate(prevProps, prevState){
                console.log('componentDidUpdate',prevProps, prevState);
            }

            componentWillUnmount() {
                clearInterval(this.interval);
            }

            
        }

        ReactDOM.render(
            <App name="Dyonyon" />,
            document.querySelector('#root')
        )
        */


        /*// Lifecycle (v 16.3 이상) - getSnapshotBeforeUpdate
        let i = 0;
        class App extends React.Component{
            state = {
                list: []
            };

            render() {
                return (
                    <div 
                        id="list"
                        style={{height:100, overflow: "scroll"}}
                        >
                        {this.state.list.map((i) => {
                            return (
                                <div>
                                    {i}
                                </div>
                            );
                        })}
                    </div>
                );
            }

            componentDidMount() {
                setInterval(()=>{
                    this.setState(state=>({
                        list: [...state.list, i++],
                    }));
                },1000);
            }

            getSnapshotBeforeUpdate(prevProps, prevState){
                if(prevState.list.length === this.state.list.length)
                    return null;
                const list = document.querySelector('#list');
                return list.scrollHeight - list.scrollTop;
            }

            componentDidUpdate(prevProps, prevState, snapshot){
                console.log(snapshot);
                if(snapshot === null)
                    return;
                const list = document.querySelector('#list');
                list.scrollTop = list.scrollHeight - snapshot;
                
            }
        }

        ReactDOM.render(
            <App name="Dyonyon" />,
            document.querySelector('#root')
        )
        */



        // Component 에러 캐치
        class App extends React.Component {
            state = {
                hasError: false
            };

            render() {
                if(this.state.hasError)
                    return <div>예상치 못한 에러가 발생했다.</div>;
                return <WebService />;
            }
            componentDidCatch(error, info){
                this.setState({
                    hasError: true
                });
            }
        }

        ReactDOM.render(
            <App />,
            document.querySelector('#root')
        )


    </script>

</body>
</html>